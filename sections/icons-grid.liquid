{{ 'section-icons-grid.css' | asset_url | stylesheet_tag }}

{% style %}
  #shopify-section-{{ section.id }} {
    --icons-grid-background-image: url("{{ section.settings.background_image_desktop | image_url }}");
    --icons-grid-subheading-background-rgb: {{ section.settings.subheading_background.rgb }};
    --icons-grid-subheading-color: {{ section.settings.subheading_color }};
    --icons-grid-columns: {{ section.settings.columns_desktop }};

    @media screen and (max-width: 768px) {
      --icons-grid-columns: {{ section.settings.columns_mobile }};
      --icons-grid-background-image: url("{{ section.settings.background_image_mobile | image_url }}");
    }
  }

  {%- for block in section.blocks -%}
    .icons-grid__block--{{ block.id }} {
      --icons-grid-block-image-width: {{ block.settings.media_image_width }}px;
    }
  {%- endfor -%}
{% endstyle %}

<div class="icons-grid__container">
  <div class="icons-grid__info">
    {%- unless section.settings.subheading == blank -%}
      <p class="icons-grid__subheading">{{ section.settings.subheading }}</p>
    {%- endunless -%}

    {%- unless section.settings.heading == blank -%}
      <h2 class="icons-grid__heading">{{ section.settings.heading }}</h2>
    {%- endunless -%}

    {%- unless section.settings.description == blank -%}
      <p class="icons-grid__description">{{ section.settings.description }}</p>
    {%- endunless -%}
  </div>

  {%- if section.blocks.size > 0 -%}
    <div class="icons-grid__grid">
      {%- for block in section.blocks -%}
        <div class="icons-grid__block icons-grid__block--{{ block.id }}">
          {%- unless block.settings.media_title == blank -%}
            <p class="icons-grid__media-title">{{ block.settings.media_title }}</p>
          {%- endunless -%}
    
          {%- unless block.settings.info_title == blank -%}
            <p class="icons-grid__info-title">{{ block.settings.info_title }}</p>
          {%- endunless -%}

          {%- unless block.settings.media_image == blank -%}
            {{ block.settings.media_image 
                | image_url: width: block.settings.media_image.width 
                | image_tag: class: 'icons-grid__media-image', loading: 'lazy' }}
          {%- endunless -%}

          {%- unless block.settings.info_description == blank -%}
            <div class="icons-grid__info-description">{{ block.settings.info_description }}</div>
          {%- endunless -%}
        </div>
      {%- endfor -%}
    </div>
  {%- endif -%}
</div>

{% render 'section-paddings-v3',
  padding_top: section.settings.padding_top,
  padding_bottom: section.settings.padding_bottom,
  padding_top_mobile: section.settings.padding_top_mobile,
  padding_bottom_mobile: section.settings.padding_bottom_mobile
%}


{% schema %}
{
  "name": "Icons grid",
  "tag": "section",
  "class": "icons-grid",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "inline_richtext",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "image_picker",
      "id": "background_image_desktop",
      "label": "Background image desktop"
    },
    {
      "type": "image_picker",
      "id": "background_image_mobile",
      "label": "Background image mobile"
    },
    {
      "type": "header",
      "content": "Paddings"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "default": 120
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "default": 90
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Padding top mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "default": 66
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Padding bottom mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "default": 40
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "constrain_width",
      "label": "Constrain width"
    },
    {
      "type": "range",
      "id": "max_width",
      "label": "Max width",
      "min": 500,
      "max": 1000,
      "step": 100,
      "unit": "px",
      "default": 700,
      "visible_if": "{{ section.settings.constrain_width }}"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Columns desktop",
      "min": 2,
      "max": 6,
      "default": 2,
      "step": 2
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Columns mobile",
      "min": 1,
      "max": 3,
      "default": 1,
      "step": 1
    },
    {
      "type": "header",
      "content": "Color"
    },
    {
      "type": "color",
      "id": "subheading_background",
      "label": "Subheading background"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading color"
    }
  ],
  "blocks": [
    {
      "type": "icon",
      "name": "Icon",
      "settings": [
        {
          "type": "header",
          "content": "Media"
        },
        {
          "type": "inline_richtext",
          "id": "media_title",
          "label": "Title"
        },
        {
          "type": "image_picker",
          "id": "media_image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "media_image_width",
          "label": "Image width",
          "min": 20,
          "max": 100,
          "step": 1,
          "unit": "px",
          "default": 50
        },
        {
          "type": "header",
          "content": "Info"
        },
        {
          "type": "text",
          "id": "info_title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "info_description",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icons grid"
    }
  ]
}
{% endschema %}