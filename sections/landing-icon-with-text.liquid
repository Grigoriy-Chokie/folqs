{{ 'section-icon-with-text.css' | asset_url| stylesheet_tag }}

{% liquid
  assign padding_desktop_top = section.settings.padding_top
  assign padding_desktop_bottom = section.settings.padding_bottom
  assign padding_top_mobile = section.settings.padding_top_mobile
  assign padding_bottom_mobile = section.settings.padding_bottom_mobile
  assign title = section.settings.title
  assign subtitle = section.settings.subtitle
  assign icon_block = section.blocks | where: 'type', 'icon'

%}
{%- style -%}
  #shopify-section-{{ section.id }} {
    padding-top: {{ padding_desktop_top }}px;
    padding-bottom: {{ padding_desktop_bottom }}px;
  }

  @media(max-width: 768px) {
    #shopify-section-{{ section.id }} {
      padding-top: {{ padding_top_mobile }}px;
      padding-bottom: {{ padding_bottom_mobile }}px;
    }
  }

  .shopify-section:has(.icon-with-text__wrapper) {
    background: {{ section.settings.background }};    
  }
{%- endstyle -%}
<div class="icon-with-text__wrapper icon-with-text__wrapper--{{ template.suffix }} {% if request.page_type == 'index' or template.suffix == 'bovine-landing-folqs-gift' %}icon-with-text__wrapper--extra{% endif %}">

  {% if title != blank %}
    <div class="icon-with-text__title" style="--title-color: {{ section.settings.title_color }}">
      {{ title }}
    </div>
  {% endif %}
  {% if subtitle != blank %}
    <p class="icon-with-text__subtitle">{{ subtitle }}</p>
  {% endif %}

  <ul class="icon-with-text list-unstyled">
    {% for block in icon_block %}
      {% liquid 
        assign icon = block.settings.icon
        assign text = block.settings.text
      %}

      {% if icon != blank %}
        <li class="icon-with-text__item">
          <div class="icon-with-text__icon">{{ icon | image_url: width: 1000 | image_tag: alt: icon.alt }}</div>
          {% if text != blank %}
            <p class="icon-with-text__text">{{ text }}</p>
          {% endif %}
        </li>
      {% endif %}
    {% endfor %}
  </ul>

</div>

{% schema %}
  {
    "name": "Landing Icon with Text",
    "settings": [
      {
        "type": "header",
        "content": "Section's space between"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Top"
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Bottom"
      },
      {
        "type": "range",
        "id": "padding_top_mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Top Mobile"
      }, 
      {
        "type": "range",
        "id": "padding_bottom_mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Bottom Mobile"
      },
      {
        "type": "richtext",
        "id": "title",
        "label": "Title"
      },
      {
        "type": "text",
        "id": "subtitle",
        "label": "Subtitle"
      },
      {
        "type": "color_background",
        "id": "background",
        "label": "Background",
        "default": "linear-gradient(#ffffff, #000000)"
      },
      {
        "type": "color",
        "id": "title_color",
        "label": "Title Color",
        "default": "#005eb8"
      }
    ],
    "blocks": [
      {
        "type": "icon",
        "name": "Icon",
        "limit": 6,
        "settings": [
          {
            "type": "image_picker",
            "id": "icon",
            "label": "Icon"
          },
          {
            "type": "text",
            "id": "text",
            "label": "Text"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Landing Icon with Text"
      }
    ]
  }
{% endschema %}