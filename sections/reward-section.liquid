{{ 'component-reward.css' | asset_url | stylesheet_tag }}

{% liquid
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign padding_top_mobile = section.settings.padding_top_mobile
  assign padding_bottom_mobile = section.settings.padding_bottom_mobile
%}

{% render 'section-paddings-v3',
  padding_top: padding_top,
  padding_bottom: padding_bottom,
  padding_top_mobile: padding_top_mobile,
  padding_bottom_mobile: padding_bottom_mobile
%}

{% if section.settings.bg_image_desktop != blank %}
  <style>
    .section-{{ section.id }}--padding {
      background: url("{{ section.settings.bg_image_desktop | img_url: 'master' }}") center center/cover no-repeat;
    }
  </style>
{% endif %}

{% if section.settings.bg_image_mobile != blank %}
  <style>
    @media screen and (max-width: 550px) {
      .section-{{ section.id }}--padding {
        background: url("{{ section.settings.bg_image_mobile | img_url: 'master' }}") center center/cover no-repeat;
      }
    }
  </style>
{% endif %}

<section class="reward__section section-{{ section.id }}--padding">
  <div class="c-container">
    {% if section.settings.pretitle != blank %}
      <div class="reward__section-pretitle">{{ section.settings.pretitle }}</div>
    {% endif %}
    {% if section.settings.title != blank %}
      <h2 class="reward__section-title">{{ section.settings.title }}</h2>
    {% endif %}
    {% if section.settings.subtitle != blank %}
      <h2 class="reward__section-subtitle">{{ section.settings.subtitle }}</h2>
    {% endif %}

    {% if section.blocks.size > 0 %}
      <div class="reward__section-items">
        <div class="reward__section-items_wrapper">
          {% for block in section.blocks %}
            <div class="reward__section-item {% if block.settings.mobile_text_bottom == true %}is--mobile-bottom-text{% endif %}" {{ block.shopify_attributes }}>
              <div class="reward__section-item_texts">
                {% if block.settings.title != blank %}
                  <div class="reward__section-item_title">{{ block.settings.title }}</div>
                {% endif %}
                {% if block.settings.subtitle != blank %}
                  <div class="reward__section-item_subtitle">{{ block.settings.subtitle }}</div>
                {% endif %}
              </div>
              <div class="c-block">
                {% if block.settings.image != blank %}
                  <img src="{{ block.settings.image | image_url: width: 56, height: 56 }}" alt="{{ block.settings.image.alt }}" width="56" height="56" loading="lazy">
                {% endif %}
                {% if block.settings.content != blank %}
                  <div class="reward__section-item_content">
                    {{ block.settings.content | newline_to_br }}
                  </div>
                {% endif %}
              </div>
            </div>
          {% endfor %}
          {% if section.settings.mobile_svg != blank %}
            <div class="mobile-svg reward__section-items_svg">
              {{ section.settings.mobile_svg }}
            </div>
          {% endif %}
          {% if section.settings.desktop_svg != blank %}
            <div class="desktop-svg reward__section-items_svg">
              {{ section.settings.desktop_svg }}
            </div>
          {% endif %}
        </div>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
  {
    "name": "Reward",
    "settings": [
      {
        "type": "text",
        "id": "pretitle",
        "label": "Pretitle"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title"
      },
      {
        "type": "text",
        "id": "subtitle",
        "label": "Subtitle"
      },
      {
        "type": "image_picker",
        "id": "bg_image_desktop",
        "label": "Background image desktop"
      },
      {
        "type": "image_picker",
        "id": "bg_image_mobile",
        "label": "Background image mobile"
      },
      {
        "type": "textarea",
        "id": "desktop_svg",
        "label": "Desktop arrow icon"
      },
      {
        "type": "textarea",
        "id": "mobile_svg",
        "label": "Mobile arrow icon"
      },
      {
        "type": "header",
        "content": "Paddings"
      },
      {
        "type": "range",
        "id": "padding_top",
        "label": "Padding top",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 120
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 90
      },
      {
        "type": "range",
        "id": "padding_top_mobile",
        "label": "Padding top mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 66
      },
      {
        "type": "range",
        "id": "padding_bottom_mobile",
        "label": "Padding bottom mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 40
      }
    ],
    "blocks": [
      {
        "type": "item",
        "name": "Item",
        "limit": 3,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title"
          },
          {
            "type": "text",
            "id": "subtitle",
            "label": "Subtitle"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "textarea",
            "id": "content",
            "label": "Content"
          },
          {
            "type": "checkbox",
            "id": "mobile_text_bottom",
            "label": "Place text at the bottom for mobile devices",
            "default": false
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Reward"
      }
    ]
  }
{% endschema %}
