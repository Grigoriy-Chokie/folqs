{{ 'section-hero-banner-ab.css' | asset_url | stylesheet_tag }}

{% style %}
  #shopify-section-{{ section.id }} {
    --hero-banner-ab-padding-top: {{ section.settings.padding_top_desktop }}px;
    --hero-banner-ab-image-position: {{ section.settings.image_position_desktop }};
    --hero-banner-ab-background: {{ section.settings.background }};
    --hero-banner-ab-text-color: {{ section.settings.color }};
    --hero-banner-ab-image-order: {{ section.settings.image_order_mobile }};

    @media screen and (max-width: 768px) {
      --hero-banner-ab-padding-top: {{ section.settings.padding_top_mobile }}px;
      --hero-banner-ab-image-position: {{ section.settings.image_position_mobile }};
    }
  }

  {%- for block in section.blocks -%}
    .content-block--{{ block.id }} {
      {%- if block.type == 'title' -%}
        --hero-banner-ab-title-order: {{ block.settings.title_order_mobile }};
        --hero-banner-ab-title-strong: {{ block.settings.title_strong_color }};

      {%- elsif block.type == 'richtext' -%}
        --hero-banner-ab-richtext-order: {{ block.settings.richtext_order_mobile }};

      {%- elsif block.type == 'icons-with-text' -%}
        --hero-banner-ab-icons-with-text-order: {{ block.settings.icons_with_text_order_mobile }};

      {%- elsif block.type == 'reviews-cta' -%}
        --hero-banner-ab-reviews-cta-order: {{ block.settings.block_order_mobile }};
        --hero-banner-ab-reviews-cta-background: {{ block.settings.cta_background }};
        --hero-banner-ab-reviews-cta-color: {{ block.settings.cta_text_color }};
      {%- endif -%}
    }
  {%- endfor -%}
{% endstyle %}

{%- liquid
  assign image_mobile = section.settings.image_mobile | default: section.settings.image_desktop
-%}

<div class="hero-banner-ab__container">
  <div class="hero-banner-ab__image-wrapper hero-banner-ab-image--desktop">
    {%- if section.settings.image_desktop != blank -%}
      {{ section.settings.image_desktop 
         | image_url: width: section.settings.image_desktop.width 
         | image_tag: class: 'hero-banner-ab__image', alt: section.settings.image_desktop.alt  }}
    {% else %}
      {{ 'image' | placeholder_svg_tag }}
    {%- endif -%}
  </div>

  <div class="hero-banner-ab__content">
    <div class="hero-banner-ab__image-wrapper hero-banner-ab-image--mobile">
      {%- if image_mobile != blank -%}
        {{ image_mobile 
          | image_url: width: image_mobile.width 
          | image_tag: class: 'hero-banner-ab__image', alt: image_mobile.alt  }}
      {% else %}
        {{ 'image' | placeholder_svg_tag }}
      {%- endif -%}
    </div>

    {%- for block in section.blocks -%}
      {%- case block.type -%}
        {%- when 'title' -%}
          <div class="content-block--{{ block.id }} content__title-wrapper">
            {{ block.settings.title }}
          </div>

        {%- when 'highlighted-text' -%}
          <p class="content-block--{{ block.id }} content__highlighted-text">
            {% assign text_words = block.settings.text | split: ' ' %}

            {%- for word in text_words -%}
             <span>{{- word | append: ' ' -}}</span>
            {%- endfor -%}
          </p>
        
        {%- when 'richtext' -%}
          <div class="content-block--{{ block.id }} content__richtext {{ block.settings.richtext_show_on }}">
            {{ block.settings.richtext }}
          </div>

        {%- when 'icons-with-text' -%}
          <div class="content-block--{{ block.id }} content__icons-with-text-container">
            {%- for index in (1..3) -%}
              {%- liquid
                assign icon_key = 'icons_with_text_icon_' | append: index
                assign icon_key_mobile = 'icons_with_text_icon_mobile_' | append: index
                assign text_key = 'icons_with_text_text_' | append: index
                assign text_key_mobile = 'icons_with_text_text_mobile_' | append: index

                assign icon_mobile = block.settings[icon_key_mobile]
              -%}

              <div class="content__icon-with-text">
                {%- unless block.settings[icon_key] == blank -%}
                  <div class="icon-with-text__icon-wrapper">
                    <picture>
                      {%- unless icon_mobile == blank -%}
                        <source srcset="{{ icon_mobile | image_url }}" media="(max-width: 750px)">
                      {%- endunless -%}

                      {{ block.settings[icon_key] 
                        | image_url: width: block.settings[icon_key].width 
                        | image_tag: class: 'icon-with-text__icon'  }}
                    </picture>
                  </div>
                {%- endunless -%}

                <div class="icon-with-text__text-wrapper hero-banner-ab--desktop">
                  {{ block.settings[text_key] }}
                </div>

                <div class="icon-with-text__text-wrapper hero-banner-ab--mobile">
                  {{ block.settings[text_key_mobile] }}
                </div>
              </div>
            {%- endfor -%}
          </div>

        {%- when 'reviews-cta' -%}  
          <div class="content-block--{{ block.id }} content__reviews-cta">
            <div class="content__reviews">
              {%- unless block.settings.reviews_image == blank -%}
                <div class="reviews__image-wrapper">
                  <picture>
                    {%- unless block.settings.reviews_image_mobile == blank -%}
                      <source srcset="{{ block.settings.reviews_image_mobile | image_url }}" media="(max-width: 750px)">
                    {%- endunless -%}
                    
                    {{- block.settings.reviews_image 
                     | image_url: width: block.settings.reviews_image.width 
                     | image_tag: class: 'reviews__image', loading: 'lazy' -}}
                  </picture>
                </div>
              {%- endunless -%}

              {%- unless block.settings.reviews_stars == blank-%}
                <div class="reviews__stars">
                  {{- block.settings.reviews_stars 
                     | image_url: width: block.settings.reviews_stars.width 
                     | image_tag: class: 'reviews__stars-image', loading: 'lazy' -}}
                </div>
              {%- endunless -%}

              <p class="reviews__text">
                <span class="hero-banner-ab--desktop">{{- block.settings.reviews_text -}}</span>
                <span class="hero-banner-ab--mobile">{{- block.settings.reviews_text_mobile -}}</span>
              </p>
            </div>

            <div class="content__cta-container">
              <a href="{{ block.settings.cta_link }}" class="cta-container__button">
                {{- block.settings.cta_text -}}
                {{ 'icon-landing-button-arrow.svg' | inline_asset_content }}
              </a>

              <div class="cta-container__guarantee-badge">
                {%- unless block.settings.guarantee_icon == blank -%}
                  {{ block.settings.guarantee_icon 
                     | image_url: width: block.settings.guarantee_icon.width
                     | image_tag: class: 'guarantee-badge__icon' }}
                {%- endunless -%}

                {%- unless block.settings.guarantee_text == blank -%}
                  {{ block.settings.guarantee_text }}
                {%- endunless -%}
              </div>
            </div>
          </div>
      {%- endcase -%}
    {%- endfor -%}
  </div>
</div>

{% schema %}
{
  "name": "Hero banner A/B",
  "class": "hero-banner-ab",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Image desktop"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Image mobile"
    },
    {
      "type": "select",
      "id": "image_position_desktop",
      "label": "Image position desktop",
      "default": "row-reverse",
      "options": [
        {
          "value": "row",
          "label": "Start"
        },
        {
          "value": "row-reverse",
          "label": "End"
        }
      ]
    },
    {
      "type": "number",
      "id": "image_order_mobile",
      "label": "Image order mobile",
      "default": 2
    },
    {
      "type": "header",
      "content": "Color"
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background color"
    },
    {
      "type": "color",
      "id": "color",
      "label": "Text color"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "label": "Padding top deskop",
      "unit": "px",
      "min": 0,
      "max": 200,
      "step": 20,
      "default": 100
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Padding top mobile",
      "unit": "px",
      "min": 0,
      "max": 200,
      "step": 20,
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "title",
      "name": "Title",
      "settings": [
        {
          "type": "richtext",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "number",
          "id": "title_order_mobile",
          "label": "Order mobile",
          "default": 1
        },
        {
          "type": "color",
          "id": "title_strong_color",
          "label": "Strong color"
        }
      ]
    },
    {
      "type": "highlighted-text",
      "name": "Highlighted text",
      "settings": [
        {
          "type": "text",
          "id": "highlighted_text",
          "label": "Text"
        },
        {
          "type": "text",
          "id": "highlighted_order_mobile",
          "label": "Order mobile"
        },
        {
          "type": "select",
          "id": "highlighted_show_on",
          "label": "Show on devices",
          "default": "",
          "options": [
            {
              "value": "hero-banner-ab--desktop",
              "label": "Desktop only"
            },
            {
              "value": "hero-banner-ab--mobile",
              "label": "Mobile only"
            },
            {
              "value": "",
              "label": "All devices"
            }
          ]
        }
      ]
    },
    {
      "type": "richtext",
      "name": "Richtext",
      "settings": [
        {
          "type": "richtext",
          "id": "richtext",
          "label": "Text"
        },
        {
          "type": "number",
          "id": "richtext_order_mobile",
          "label": "Order mobile",
          "default": 2
        },
        {
          "type": "select",
          "id": "richtext_show_on",
          "label": "Show on devices",
          "default": "",
          "options": [
            {
              "value": "hero-banner-ab--desktop",
              "label": "Desktop only"
            },
            {
              "value": "hero-banner-ab--mobile",
              "label": "Mobile only"
            },
            {
              "value": "",
              "label": "All devices"
            }
          ]
        }
      ]
    },
    {
      "type": "icons-with-text",
      "name": "Icons with text",
      "settings": [
        {
          "type": "number",
          "id": "icons_with_text_order_mobile",
          "label": "Order mobile",
          "default": 5
        },
        {
          "type": "header",
          "content": "Icon with text 1"
        },
        {
          "type": "image_picker",
          "id": "icons_with_text_icon_1",
          "label": "Icon 1"
        },
        {
          "type": "richtext",
          "id": "icons_with_text_text_1",
          "label": "Text 1",
        },
        {
          "type": "image_picker",
          "id": "icons_with_text_icon_mobile_1",
          "label": "Icon mobile 1"
        },
        {
          "type": "richtext",
          "id": "icons_with_text_text_mobile_1",
          "label": "Text mobile 1",
        },
        {
          "type": "header",
          "content": "Icon with text 2"
        },
        {
          "type": "image_picker",
          "id": "icons_with_text_icon_2",
          "label": "Icon 2"
        },
        {
          "type": "richtext",
          "id": "icons_with_text_text_2",
          "label": "Text 2",
        },
        {
          "type": "image_picker",
          "id": "icons_with_text_icon_mobile_2",
          "label": "Icon mobile 2"
        },
        {
          "type": "richtext",
          "id": "icons_with_text_text_mobile_2",
          "label": "Text mobile 2",
        },
        {
          "type": "header",
          "content": "Icon with text 3"
        },
        {
          "type": "image_picker",
          "id": "icons_with_text_icon_3",
          "label": "Icon 3"
        },
        {
          "type": "richtext",
          "id": "icons_with_text_text_3",
          "label": "Text 3",
        },
        {
          "type": "image_picker",
          "id": "icons_with_text_icon_mobile_3",
          "label": "Icon mobile 3"
        },
        {
          "type": "richtext",
          "id": "icons_with_text_text_mobile_3",
          "label": "Text mobile 3",
        },
      ]
    },
    {
      "type": "reviews-cta",
      "name": "Reviews with CTA",
      "settings": [
        {
          "type": "number",
          "id": "block_order_mobile",
          "label": "Block order mobile",
          "default": 5
        },
        {
          "type": "header",
          "content": "Reviews"
        },
        {
          "type": "image_picker",
          "id": "reviews_image",
          "label": "Reviews image"
        },
        {
          "type": "image_picker",
          "id": "reviews_image_mobile",
          "label": "Reviews image mobile (optional)"
        },
        {
          "type": "image_picker",
          "id": "reviews_stars",
          "label": "Reviews stars"
        },
        {
          "type": "text",
          "id": "reviews_text",
          "label": "Reviews text",
        },
        {
          "type": "text",
          "id": "reviews_text_mobile",
          "label": "Reviews text mobile",
        },
        {
          "type": "header",
          "content": "CTA"
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "CTA text",
          "default": "Try Folqs Today"
        },
        {
          "type": "url",
          "id": "cta_link",
          "label": "CTA link"
        },
        {
          "type": "color",
          "id": "cta_background",
          "label": "CTA background",
          "default": "#FF6A13"
        },
        {
          "type": "color",
          "id": "cta_text_color",
          "label": "CTA text color"
        },
        {
          "type": "header",
          "content": "Guarantee badge"
        },
        {
          "type": "image_picker",
          "id": "guarantee_icon",
          "label": "Badge icon"
        },
        {
          "type": "text",
          "id": "guarantee_text",
          "label": "Badge text",
          "default": "90-Day Money-Back Guarantee"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero banner A/B"
    }
  ]
}
{% endschema %}