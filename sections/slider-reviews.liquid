{%- if section.blocks.size > 0 -%}
    {{ 'slider-reviews.css' | asset_url | stylesheet_tag }}
    {%- style -%}
        .section-{{ section.id }} {
          padding-top: {{ section.settings.padding_top }}px;
          padding-bottom: {{ section.settings.padding_bottom }}px;
        }
        @media(max-width: 768px) {
          .section-{{ section.id }} {
            padding-top: {{ section.settings.padding_top_mobile }}px;
            padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
          }
        }
    {%- endstyle -%}
    <div class="section-{{ section.id }} page-width reviews--{{ section.settings.mobile_content_alignment }}">
        {%- liquid
          assign text_stars = section.settings.text_stars
          assign heading = section.settings.heading
          assign heading_mobile = section.settings.heading_mobile
          assign information = section.settings.information
          if text_stars != blank or heading != blank or information != blank
            assign has_information = true
          else
            assign has_information = false
          endif
        -%}
        {% if has_information == true %}
          <div class="reviews-info">
            {% if text_stars != blank %}
              <div class="reviews-info__review">
                {%- render "icon-stars" -%}
                <span>{{- text_stars -}}</span>
              </div>
            {% endif %}
            {% if heading != blank %}
              <h2 class="reviews-info__title {% unless heading_mobile == blank %} reviews-info__title--with-mobile{% endunless %}">
                <span class = "title__content--desktop">
                  {{- heading -}}
                </span>
                {% unless heading_mobile == blank %}
                  <span class = "title__content--mobile">
                    {{- heading_mobile -}}
                  </span>
                {% endunless %}
              </h2>
            {% endif %}
            {% if information != blank %}
              <p class="reviews-info__information">{{- information -}}</p>
            {% endif %}
          </div> 
        {% endif %}
        <div class="reviews-slider">
            <div class="swiper-wrapper">
                {%- for block in section.blocks -%}
                    <div class="reviews-slide swiper-slide">
                        {%- if block.settings.image != blank or
                        block.settings.title != blank or
                        block.settings.description != blank -%}
                            <div class="review-slide__content">
                                {%- if block.settings.image != blank -%}
                                    <div class="review-slide__image">
                                        <img src="{{ block.settings.image | img_url: "master" }}"
                                             alt="{{ block.settings.image.alt }}"></div>{%- endif -%}
                                {%- if block.settings.title != blank -%}
                                    <div class="review-slide__title">{{ block.settings.title }}
                                        <div class="review-slide__star">
                                            {% for i in (1..5) %}
                                                {% render 'icon-star' %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                {%- endif -%}

                                {%- if block.settings.description != blank -%}
                                    <div class="review-slide__description">{{ block.settings.description }}</div>
                                {%- endif -%}
                            </div>
                        {%- endif -%}
                        {%- if block.settings.name != blank or block.settings.type_buyer %}
                            <div class="review-slide__info">
                                {%- if block.settings.name != blank -%}
                                    <div class="review-slide__name">{{ block.settings.name }}</div>
                                {%- endif -%}
                                {%- if block.settings.type_buyer -%}
                                    <div class="review-slide__buyer">{{ section.settings.text_certified_buyer }}</div>
                                {%- endif -%}
                            </div>
                        {%- endif -%}
                    </div>
                {%- endfor -%}
            </div>
        </div>
    </div>
    <script src="{{ 'slider-reviews.js' | asset_url }}"></script>
{%- endif -%}
{% schema %}
{
  "name": "Slider review",
  "limit": 1,
  "class": "reviews",
  "settings": [ 
    {
      "type": "header",
      "content": "Information"
    },
    {
      "type": "text",
      "id": "text_stars",
      "label": "Text next to icon stars"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "heading_mobile",
      "label": "Heading mobile"
    },
    {
      "type": "textarea",
      "id": "information",
      "label": "Information"
    },
    {
      "type": "select",
      "label": "Mobile content alignment",
      "id": "mobile_content_alignment",
      "default": "center",
      "options": [
        {
          "label": "Left",
          "value": "left"
        },
        {
          "label": "Center",
          "value": "center"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding top(desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom(desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding top(mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding bottom(mobile)",
      "default": 0
    },
    {
      "type": "text",
      "id": "text_certified_buyer",
      "label": "Text",
      "default": "Certified buyer"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name"
        },
        {
          "type": "checkbox",
          "id": "type_buyer",
          "label": "Type certified buyer"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Slider review"
    }
  ]
}
{% endschema %}
