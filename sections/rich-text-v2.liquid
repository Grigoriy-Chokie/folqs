{{ 'section-rich-text-v2.css' | asset_url | stylesheet_tag }}

{% liquid
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign padding_top_mobile = section.settings.padding_top_mobile
  assign padding_bottom_mobile = section.settings.padding_bottom_mobile
  assign sizes = '(min-width: 750px) 50vw, 100vw'
  assign widths = '375, 550, 750, 1100, 1500, 1780'
  assign fetch_priority = 'auto'
  if section.index == 1
    assign fetch_priority = 'high'
  endif
%}

{% render 'section-paddings-v3',
  padding_top: padding_top,
  padding_bottom: padding_bottom,
  padding_top_mobile: padding_top_mobile,
  padding_bottom_mobile: padding_bottom_mobile
%}

{% if section.settings.bg_desk != blank %}
  <style>
    .section-{{ section.id }}--padding {
      background: url("{{ section.settings.bg_desk | img_url: 'master' }}") center center/cover no-repeat;
    }
  </style>
{% endif %}

{% if section.settings.bg_mob != blank %}
  <style>
    @media screen and (max-width: 990px) {
      .section-{{ section.id }}--padding {
        background: url("{{ section.settings.bg_mob | img_url: 'master' }}") center center/cover no-repeat;
      }
    }
  </style>
{% endif %}

<section class="rich-text-v2 section-{{ section.id }}--padding">
  <div class="c-container">
    <div class="rich-text-v2-wrapper">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'heading' %}
            <div class="rich-text-v2-block type-{{ block.type }}">
              <h2>{{ block.settings.heading }}</h2>
            </div>

          {% when 'contnet' %}
            <div class="rich-text-v2-block type-{{ block.type }}">
              {{ block.settings.content }}
            </div>

          {% when 'image' %}
            <div class="rich-text-v2-block type-{{ block.type }}">
              {{
                block.settings.image
                | image_url: width: 1440
                | image_tag:
                  width: block.settings.image.width,
                  sizes: sizes,
                  widths: widths,
                  fetchpriority: fetch_priority,
                  alt: block.settings.image.alt
              }}
            </div>

          {% when 'colored-content' %}
            <div class="rich-text-v2-block type-{{ block.type }}" style="color: {{ block.settings.text_color }};">
              {{ block.settings.content }}
            </div>
            
        {% endcase %}
      {% endfor %}
    </div>

  </div>
</section>


{% schema %}
  {
    "name": "Rich text v2",
    "settings": [
      {
        "type": "image_picker",
        "id": "bg_desk",
        "label": "Background desktop"
      },
      {
        "type": "image_picker",
        "id": "bg_mob",
        "label": "Background mobile"
      },
      {
        "type": "header",
        "content": "Paddings"
      },
      {
        "type": "range",
        "id": "padding_top",
        "label": "Padding top",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 120
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 90
      },
      {
        "type": "range",
        "id": "padding_top_mobile",
        "label": "Padding top mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 66
      },
      {
        "type": "range",
        "id": "padding_bottom_mobile",
        "label": "Padding bottom mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "px",
        "default": 40
      }
    ],
    "blocks": [
      {
        "type": "heading",
        "name": "Heading",
        "settings": [
          {
            "type": "text",
            "id": "heading",
            "label": "Heading"
          }
        ]
      },
      {
        "type": "contnet",
        "name": "Content",
        "settings": [
          {
            "type": "richtext",
            "id": "content",
            "label": "Content",
            "default": "<p></p>"
          }
        ]
      },
      {
        "type": "image",
        "name": "Image",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          }
        ]
      },
      {
        "type": "colored-content",
        "name": "Colored content",
        "settings": [
          {
            "type": "richtext",
            "id": "content",
            "label": "Content",
            "default": "<p></p>"
          },
          {
            "type": "color",
            "id": "text_color",
            "label": "Text color",
            "default": "#005EB8"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Rich text v2"
      }
    ]
  }
{% endschema %}
