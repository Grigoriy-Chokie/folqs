{{ 'section-list-icons.css' | asset_url| stylesheet_tag }}

{% liquid
  assign background = section.settings.background
  assign padding_desktop_top = section.settings.padding_top
  assign padding_desktop_bottom = section.settings.padding_bottom
  assign padding_top_mobile = section.settings.padding_top_mobile
  assign padding_bottom_mobile = section.settings.padding_bottom_mobile
  assign title = section.settings.title
  assign richtext = section.settings.richtext

  assign icon_block = section.blocks | where: 'type', 'icon'
  assign additional_icon_block = section.blocks | where: 'type', 'additional-icon'
%}
{%- style -%}
  #shopify-section-{{ section.id }} {
    padding-top: {{ padding_desktop_top }}px;
    padding-bottom: {{ padding_desktop_bottom }}px;
    background: {{ background }}
  }

  @media(max-width: 768px) {
    #shopify-section-{{ section.id }} {
      padding-top: {{ padding_top_mobile }}px;
      padding-bottom: {{ padding_bottom_mobile }}px;
    }
  }
{%- endstyle -%}

<div class="list-icons__container">

  {% if title != blank %}
    <div class="list-icons__title">{{ title }}</div>
  {% endif %}

  {% if icon_block.size > 0 %}
    <ul class="list-icons__group">
      {% for block in section.blocks %}
        {% if block.type == 'icon' %}
          {% assign icon = block.settings.icon %}
          {% if icon != blank %}
            <li class="list-icons__item">
              <div class="list-icons__icon">{{ icon | image_url: width: 1000 | image_tag }}</div>
            </li>
          {% endif %}
        {% endif %}
      {% endfor %}
    </ul>
  {% endif %}

  {% if additional_icon_block.size > 0 %}
    <ul class="list-icons__additional-group">
      {% for block in section.blocks %}
        {% if block.type == 'additional-icon' %}
          {% assign icon = block.settings.icon %}
          <li class="list-icons__additional-item">
            {% if icon != blank %}
              <div class="list-icons__additional-icon">
                {{ icon | image_url: width: 1000 | image_tag}}
                </div>
            {% endif %}
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  {% endif %}

  {% if richtext != blank %}
    <div class="list-icons__richtext">{{ richtext }}</div>
  {% endif %}
</div>

{% schema %}
  {
    "name": "List Icons",
    "settings": [
      {
        "type": "header",
        "content": "Section's space between"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Top"
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Bottom"
      },
      {
        "type": "range",
        "id": "padding_top_mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Top Mobile"
      }, 
      {
        "type": "range",
        "id": "padding_bottom_mobile",
        "min": 0,
        "max": 200,
        "step": 2,
        "default": 0,
        "unit": "px",
        "label": "Padding Bottom Mobile"
      },
      {
        "type": "richtext",
        "id": "title",
        "label": "Title"
      },
      {
        "type": "richtext",
        "id": "richtext",
        "label": "Richtext"
      },
      {
        "type": "color_background",
        "id": "background",
        "label": "Background"
      }
    ],
    "blocks": [
      {
        "type": "icon",
        "name": "Icon",
        "settings": [
          {
            "type": "image_picker",
            "id": "icon",
            "label": "Icon"
          }
        ]
      },
      {
        "type": "additional-icon",
        "name": "Additional Icon",
        "settings": [
          {
            "type": "image_picker",
            "id": "icon",
            "label": "Icon"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "List Icons"
      }
    ]
  }
{% endschema %}