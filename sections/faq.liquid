{%- liquid
    assign padding_top = section.settings.padding_top | append: 'px'
    assign padding_bottom = section.settings.padding_bottom | append: 'px'
    assign padding_top_mobile = section.settings.padding_top_mobile | append: 'px'
    assign padding_bottom_mobile = section.settings.padding_bottom_mobile | append: 'px'

    assign is_first_opened = section.settings.open_first_row_by_default
    assign heading = section.settings.heading
    assign heading_mobile = section.settings.heading_mobile
    assign information = section.settings.information
    if section.blocks.size != 0
        assign has_blocks = true
    else
        assign has_blocks = true
    endif
-%}
{% if has_blocks == true %}
{%- style -%}
    .faq--{{section.id}} {
        padding-top: {{padding_top}};
        padding-bottom: {{padding_bottom}};
    }
    @media(max-width: 768px) {
        .faq--{{section.id}} {
            padding-top: {{padding_top_mobile}};
            padding-bottom: {{padding_bottom_mobile}};
        }
    }
{%- endstyle -%}
{{ "component-faq.css" | asset_url | stylesheet_tag  }}
<div class="faq faq--{{section.id}} faq--{{ template.suffix | default: template.name }} faq--{{ section.settings.layout }}">
    <div class="faq__container page-width">
        <div class="faq__text">
            {%- if heading != blank -%}
                <h2 class="faq__text-title {% unless heading_mobile == blank %} faq__text-title--with-mobile {% endunless %}">
                    <span class = "faq__text-title--desktop">{{- heading -}}</span>
                    {% unless heading_mobile == blank %}
                        <span class = "faq__text-title--mobile">{{- heading_mobile -}}</span>
                    {% endunless %}
                </h2>
            {%- endif -%}
            {%- if information != blank -%}
                <p class="faq__text-information">{{- information -}}</p>
            {%- endif -%}
        </div>
        <div class="faq__content">
            {% for block in section.blocks %}
                {%- liquid
                    assign question = block.settings.question
                    assign answer = block.settings.answer
                    if question != blank and answer != blank
                        assign has_content = true
                    else
                        assign has_content = false
                    endif


                    assign class_name_row = "faq__content-item faq-item"
                    assign class_name_title = "faq-item__question"
                    assign class_name_content = "faq-item__answer"
                    if has_content == true
                        render "collapse-row" title:question, content:answer, class_name_row:class_name_row, class_name_title:class_name_title, class_name_content:class_name_content, is_first_opened:is_first_opened, index:forloop.index0
                    endif
                -%}
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

{% schema %}
{
    "name": "Faq",
    "tag": "section",
    "blocks":[
        {
            "type": "item",
            "name": "Item",
            "settings": [
                {
                    "type": "text",
                    "id": "question",
                    "label": "Question",
                    "default": "Lorem ipsum dolor sit amet consectetur."
                },
                {
                    "type": "richtext",
                    "id": "answer",
                    "label": "Answer",
                    "default": "<p>Lorem ipsum dolor sit amet consectetur. Ultricies ornare adipiscing lorem amet sit. Consequat amet eu sed imperdiet nec dui. Tempus eget nec nulla diam donec dolor convallis ultrices diam.</p>"
                }
            ]
        }
    ],
    "settings": [
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding top",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding bottom",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_top_mobile",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding top mobile",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_bottom_mobile",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding bottom mobile",
            "default": 0
        },
        {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Frequently Asked Questions"
        },
        {
            "type": "richtext",
            "id": "heading_mobile",
            "label": "Heading mobile"
        },
        {
            "type": "textarea",
            "id": "information",
            "label": "Information",
            "default": "Lorem ipsum dolor sit amet consectetur. Gravida facilisi eleifend sit quam morbi risus id. Nisl massa donec tincidunt."
        },
        {
            "type": "checkbox",
            "label": "Open first row by default",
            "id": "open_first_row_by_default",
            "default": false
        },
        {
            "type": "header",
            "content": "Layout settings"
        },
        {
            "type": "select",
            "id": "layout",
            "label": "Layout",
            "default": "row",
            "options": [
              {
                "value": "column",
                "label": "Column"
              },
              {
                "value": "row",
                "label": "Row"
              }
            ]
        }
    ],
    "presets": [
        {
            "name": "Faq"
        }
    ]
}
{% endschema %}