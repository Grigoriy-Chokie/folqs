{{ 'section-result.css' | asset_url | stylesheet_tag }}


{% liquid
    assign title = section.settings.title
    assign text = section.settings.text
    assign padding_top = section.settings.padding_top | append: 'px'
    assign padding_bottom = section.settings.padding_bottom | append: 'px'
    assign padding_top_mobile = section.settings.padding_top_mobile | append: 'px'
    assign padding_bottom_mobile = section.settings.padding_bottom_mobile | append: 'px'
    assign title_mobile = section.settings.title_mobile 
%}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{padding_top}};
    padding-bottom: {{padding_bottom}};
  }
  @media(max-width: 768px) {
    .section-{{ section.id }}-padding {
      padding-top: {{padding_top_mobile}};
      padding-bottom: {{padding_bottom_mobile}};
    }
  }
{%- endstyle -%}
{% if section.blocks.size > 0 %}
<div id="results" class="results section-{{ section.id }}-padding">
    <div class="results__wrapper page-width {% if section.settings.is_horizontally %} results__wrapper--horizontal {% endif %}">
        {% if title != blank or text != blank %}
            <div class="results__block">
                {% if title != blank %}
                    <h2 class = "block__title {% if title_mobile != blank %} block__title--desktop{% endif %}">
                        {{ title }}
                    </h2>
                {% endif %}
                {% if title_mobile != blank %}
                  <h2 class = "block__title block__title--mobile">
                    {{ title_mobile }}
                </h2>
                {% endif %}
                {% if text != blank %}
                    <p class = " block__text">{{ text }}</p>
                {% endif %}
            </div>
            <div class="results__block results__block--steps">
                {%  for block in section.blocks %}
                    {% if block.settings.title != blank and block.settings.text != blank %}
                        <div class="results__step block-{{ block.id }}  {% if block.settings.custom_step_icon != blank %}results__step--with-icon {% endif %} scroll-trigger animate--slide-in"   style="--animation-order: {{ forloop.index }};">
                          {% if block.settings.custom_step_icon != blank %}
                            {% style %}
                            .block-{{ block.id }}::before {
                              content:  url('{{ block.settings.custom_step_icon | image_url: width: 60, height: 60}}');
                            }
                            @media(max-width: 768px) {
                              .block-{{ block.id }}::before {
                              content:  url('{{ block.settings.custom_step_icon | image_url: width: 40, height: 40,  crop: 'bottom'}}');
                            }
                            }
                            {% endstyle %}
                          {% endif %}
                            <h3>{{ block.settings.title }}</h3>
                            <p>{{ block.settings.text }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>
{% endif %}



{% schema %}
{
  "name": "Results",
  "limit": 1,
  "settings": [
    {
      "type": "text",
      "id": "title",
      "default": "Results",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "title_mobile",
      "default": "Results",
      "label": "Title mobile"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Text",
      "default": "Lorem ipsum dolor sit amet consectetur. Gravida facilisi eleifend sit quam morbi risus id. Nisl massa donec tincidunt."
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding bottom",
      "default": 52
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding top mobile",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding bottom mobile",
      "default": 25
    },
    {
      "type": "checkbox",
      "label": "Display steps horizontally",
      "id": "is_horizontally",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "1-3 Months"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Lorem ipsum dolor sit amet consectetur. Gravida facilisi eleifend sit quam morbi risus id. Nisl massa donec tincidunt."
        },
        {
          "type": "image_picker",
          "label": "Custom step icon",
          "id": "custom_step_icon",
          "info" : "will be displayed instead of white circle. .png or .svg format"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Results"
    }
  ]
}
{% endschema %}