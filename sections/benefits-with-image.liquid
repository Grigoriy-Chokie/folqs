{%- liquid
    assign padding_top = section.settings.padding_top | append: 'px'
    assign padding_bottom = section.settings.padding_bottom | append: 'px'
    assign padding_top_mobile = section.settings.padding_top_mobile | append: 'px'
    assign padding_bottom_mobile = section.settings.padding_bottom_mobile | append: 'px'

    assign heading = section.settings.heading
    assign additional_text = section.settings.additional_text
    assign sub_heading = section.settings.sub_heading
    if section.blocks.size != 0
        assign has_blocks = true
    else
        assign has_blocks = false
    endif
-%}

{%- style -%}
    .benefit-image--{{section.id}} {
        padding-top: {{padding_top}};
        padding-bottom: {{padding_bottom}};
    }
    @media(max-width: 768px) {
        .benefit-image--{{section.id}} {
            padding-top: {{padding_top_mobile}};
            padding-bottom: {{padding_bottom_mobile}};
        }
    }
{%- endstyle -%}

{{ "component-benefits-with-image.css" | asset_url | stylesheet_tag }}
<div class="benefit-image benefit-image--{{section.id}}">
    <div class="benefit-image__container page-width">
    <div class="benefit-image__grid">
            <div class="benefit-image__grid-text grid-benefits__text">
                {% if heading != blank %}
                    <h2 class="grid-benefits__text-title">{{- heading -}}</h2>
                {% endif %}
                {% if additional_text != blank %}
                    <p  class="grid-benefits__text-information">{{- additional_text -}}</p>
                {% endif %}
                {% if sub_heading != blank %}
                    <p class="grid-benefits__text-subheading">{{- sub_heading -}}</p> 
                {% endif %}
            </div>
            {% if has_blocks == true %}
            <div class="benefit-image__grid-items grid-benefits">
                {% for block in section.blocks %}
                    {%- liquid
                        assign image = block.settings.image
                        assign title = block.settings.title
                        assign extra_text = block.settings.extra_text
                    -%}
                    <div class="grid-benefits__item">
                        {% if image != blank %}
                            <div class="grid-benefits__item-image">
                                {{
                                    image | image_url: width: master | image_tag: widths: '500,600,700,800,900,1000',
                                    loading: 'lazy',
                                    alt: image.alt | default: "Use benefit"
                                }}  
                            </div>
                        {% endif %}
                        {% if title != blank %}
                            <h3 class="grid-benefits__item-title">{{- title -}}</h3>
                        {% endif %}
                        {% if extra_text != blank %}
                            <p class="grid-benefits__item-text">{{- extra_text -}}</p>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>   
            {% endif %}
        </div>
    </div>    
</div>

{% schema %}
{
    "name": "Benefits with image",
    "tag": "section",
    "max_blocks": 4,
    "blocks": [
        {
            "type": "block",
            "name": "Block",
            "settings": [
                {
                    "type": "image_picker",
                    "id": "image",
                    "label": "Image"
                },
                {
                    "type": "text",
                    "id": "title",
                    "label": "Title",
                    "default": "Antioxidant and Anti-Inflammatory"
                },
                {
                    "type": "textarea",
                    "id": "extra_text",
                    "label": "Extra text",
                    "default": "Supports neurotransmitter function for improved cognitive processes"
                }
            ]
        }
    ],
    "settings": [
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding top",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding bottom",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_top_mobile",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding top mobile",
            "default": 0
        },
        {
            "type": "range",
            "id": "padding_bottom_mobile",
            "min": 0,
            "max": 100,
            "step": 1,
            "unit": "px",
            "label": "Padding bottom mobile",
            "default": 0
        },
        {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Benefits of Daily Use"
        },
        {
            "type": "textarea",
            "id": "additional_text",
            "label": "Additional text",
            "default": "Lorem ipsum dolor sit amet consectetur. Pellentesque sem molestie urna donec fermentum. Proin massa sit proin non cursus congue porttitor. Ac augue sapien mi aliquet convallis. Turpis mauris risus mauris lacus pellentesque amet porttitor."
        },
        {
            "type": "text",
            "id": "sub_heading",
            "label": "Sub heading",
            "default": "Lorem ipsum dolor sit amet consectetur. Pellentesque sem molestie urna donec fermentum."
        }
    ],
    "presets": [
        {
            "name": "Benefits with image"
        }
    ]
}
{% endschema %}