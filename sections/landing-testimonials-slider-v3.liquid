{{ 'section-landing-testimonials-slider.css' | asset_url | stylesheet_tag }}
{{ 'section-landing-testimonials-slider-v3.css' | asset_url | stylesheet_tag }}

{% liquid
  assign padding_desktop_top = section.settings.padding_top
  assign padding_desktop_bottom = section.settings.padding_bottom
  assign padding_top_mobile = section.settings.padding_top_mobile
  assign padding_bottom_mobile = section.settings.padding_bottom_mobile
  assign title = section.settings.title
  assign title_mobile = section.settings.title_mobile
  assign mobile_review_image = section.settings.mobile_review_image
  assign mobile_review_subtitle = section.settings.mobile_review_subtitle
  assign subtitle = section.settings.subtitle
%}
{%- style -%}
  #shopify-section-{{ section.id }} {
    padding-top: {{ padding_desktop_top }}px;
    padding-bottom: {{ padding_desktop_bottom }}px;
  }

  @media(max-width: 768px) {
    #shopify-section-{{ section.id }} {
      padding-top: {{ padding_top_mobile }}px;
      padding-bottom: {{ padding_bottom_mobile }}px;
    }
  }

  {% if section.settings.image_bg_desktop != blank %}
    #shopify-section-{{ section.id }} {
      background: url("{{ section.settings.image_bg_desktop | img_url: 'master' }}") center center/cover no-repeat;
    }
  {% endif %}

  {% if section.settings.image_bg_mobile != blank %}
    @media screen and (max-width: 768px) {
      #shopify-section-{{ section.id }} {
        background: url("{{ section.settings.image_bg_mobile | img_url: 'master' }}") center center/cover no-repeat;
      }
    }
  {% endif %}
{%- endstyle -%}

<div class="landing-testimonials__wrapper landing-testimonials__wrapper-v3 {% if template.name == 'index' -%}landing-testimonials--new-home-page{%- endif %}{% if section.settings.enable_slide_extra_styles == true %} is--slide-extra-styles{% endif %}">
  <div class="landing-testimonials__text-container">
    {% if subtitle != blank %}
      <p class="landing-testimonials__subtitle">{{ subtitle }}</p>
    {% endif %}
    {% if title_mobile != blank %}
      <div class="landing-testimonials__title mobile">{{ title_mobile }}</div>
    {% endif %}
    {% if title != blank %}
      <div class="landing-testimonials__title">{{ title }}</div>
    {% endif %}
    {% if mobile_review_subtitle != blank %}
      <div class="review-subtitle-c">
        {% if mobile_review_image != blank %}
          <img src="{{ mobile_review_image | img_url: 'master' }}" alt="mobile_review_image.alt" width="51" height="22" loading="lazy">
        {% endif %}
        <div class="stars">
          {% for i in (1..5) %}
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_107_26332)">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M15.966 6.14563C15.8747 5.8661 15.6159 5.67787 15.3213 5.67787H10.221L8.64552 0.827037V0.826104C8.55328 0.546571 8.29446 0.358337 7.99987 0.358337C7.70622 0.358337 7.44645 0.546571 7.35516 0.827046L5.77869 5.67787H0.678458C0.383875 5.67787 0.125042 5.8661 0.03375 6.14563C-0.0575417 6.42516 0.0403333 6.7301 0.2794 6.90421L4.40646 9.90281L2.82998 14.7546C2.73869 15.035 2.8394 15.34 3.07846 15.5122C3.19704 15.5979 3.33634 15.6413 3.47562 15.6413C3.61492 15.6413 3.75422 15.5979 3.87375 15.5113L7.99987 12.5136L12.125 15.5113C12.3632 15.6845 12.6841 15.6845 12.9222 15.5122C13.1613 15.34 13.261 15.035 13.1697 14.7536L11.5933 9.90281L15.7213 6.90422C15.9594 6.7301 16.0582 6.42516 15.966 6.14564" fill="#FF6A13"/>
              </g>
              <defs>
              <clipPath id="clip0_107_26332">
              <rect width="16" height="16" fill="white"/>
              </clipPath>
              </defs>
            </svg>
          {% endfor %}
        </div>
        {{ mobile_review_subtitle }}
      </div>
    {% endif %}
  </div>  
  
  <div class="landing-testimonials__wrapper-images">
    {% for block in section.blocks %}
      {% for i in (1..2) %}
        {% liquid
          assign image_id = 'image_' | append: i
          assign image = block.settings[image_id]
        %}

        {% if image != blank %}
          <div class="image-group__item">
            <div class="image-group__picture" style="--ratio-percent: {{ ratio_percent | append: '%' }}">
              {% render 'picture',
                image: image,
                widths_list: '350, 500, 800, 1200, 1500',
                loading: 'lazy',
                fetchpriority: 'low',
                image_alt: image.alt
              %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    {% endfor %}
  </div>

  <div class="swiper landing-testimonials-swiper-v3">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        {% liquid
          assign ratio_percent = '138'
          assign heading = block.settings.heading
          assign content = block.settings.content
          assign author = block.settings.author
        %}

        <div class="swiper-slide testimonial-slide" {{ block.shopify_attributes }}>
          <div class="testimonial">
            <div class="testimonial__info">
              {% if author != blank %}
                <div class="testimonial__author-content">
                  <h4 class="testimonial__author">{{ author }}</h4>
                  <div class="testimonial__verified-badge">
                    {{ 'icon-lp-verified-buyer.svg' | inline_asset_content }}
                    <p class="testimonial__verified-text">Verified buyer</p>
                  </div>
                </div>
              {% endif %}
              <div class="testimonial__stars">
                {%- if template.name == 'index' -%}
                  {{ 'icon-stars-new.svg' | inline_asset_content }}
                {%- else -%}
                  {{ 'icon-lp-testimonials-stars.svg' | inline_asset_content }}
                {%- endif -%}
              </div>
              {% if heading != blank %}
                <h3 class="testimonial__heading">{{ heading }}</h3>
              {% endif %}
              {% if content != blank %}
                <p class="testimonial__content">{{ content }}</p>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

</div>

<script src="{{ 'section-landing-testimonials.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "Testimonials Slider v3",
  "settings": [
    {
      "type": "image_picker",
      "id": "image_bg_desktop",
      "label": "Image background desktop"
    },
    {
      "type": "image_picker",
      "id": "image_bg_mobile",
      "label": "Image background mobile"
    },
    {
      "type": "checkbox",
      "id": "enable_slide_extra_styles",
      "label": "Enalbe slide extra styles",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "extra_styles",
      "label": "Extra styles",
      "default": false
    },
    {
      "type": "header",
      "content": "Section's space between"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "default": 0,
      "unit": "px",
      "label": "Padding Top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "default": 0,
      "unit": "px",
      "label": "Padding Bottom"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "default": 0,
      "unit": "px",
      "label": "Padding Top Mobile"
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 200,
      "step": 2,
      "default": 0,
      "unit": "px",
      "label": "Padding Bottom Mobile"
    },
    {
      "type": "richtext",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "richtext",
      "id": "title_mobile",
      "label": "Title mobile",
      "default": "<p></p>"
    },
    {
      "type": "image_picker",
      "id": "mobile_review_image",
      "label": "Mobile review image"
    },
    {
      "type": "text",
      "id": "mobile_review_subtitle",
      "label": "Mobile review subtitle"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
         {
          "type": "image_picker",
          "id": "image_1",
          "label": "First Image"
        },
         {
          "type": "image_picker",
          "id": "image_2",
          "label": "Second Image"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "content",
          "label": "Content"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Landing Testimonials Slider v3"
    }
  ]
}
{% endschema %}
